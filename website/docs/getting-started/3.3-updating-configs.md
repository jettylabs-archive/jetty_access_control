---
sidebar_position: 6
slug: './configs'
---

# Update your Configuration

The configuration files generated by `jetty bootstrap` reflect the groups and access permissions that exist in your environment. You can update those configurations and then apply those configurations to your environment.

:::tip Don't worry!
The changes you make to configuration files won't be applied until you run `jetty apply`, so feel free to play around with the config files however you'd like. Thanks to version control, it'll be easy to revert any unwanted changes.
:::

:::tip Jetty Dev
Jetty uses a dynamically created JSON Schema to enable linting and autocomplete for configuration files. You can have Jetty watch for config updates and adjust the schema appropriately by running `jetty dev`.
:::

:::info ACTION
Run `jetty dev` to help as we make changes to the configuration
:::

## Groups

You can find your groups config file under `<project dir>/groups/groups.yaml`. This file probably looks something like this:

```yaml title="groups/groups.yaml"
- name: snowflake::ANALYTICS
  member of:
      - snowflake::ALL_ANALYTICS
- name: tableau::All Users
- ...
```

You may notice the connector name prepended to the group names. When this format is used, the group is specific to a single connector (in the example above, Jetty won't try to create an All Users group in Snowflake; it knows that group is tableau-specific).

Part of the magic of Jetty though, is the ability to make cross-platform groups.

To create a new group, all you need to do is add it to this file. For example, you can create a new group by adding the following to your groups file:

```yaml title="groups/groups.yaml"
- ...
- name: My Special Group
```

This would create a group called _My Special Group_ in all group-capable connected platforms (e.g., Snowflake and Tableau, but not dbt). You will always refer to this group in config files by the name _My Special Group_, but if you want the group to have connector-specific names behind the scenes, you can configure that like this:

```yaml title="groups/groups.yaml"
- ...
- name: My Special Group
  identifiers:
      snowflake: MY_SPECIAL_GROUP
```

This would create a group called _MY_SPECIAL_GROUP_ in Snowflake, but still called _My Special Group_ in Tableau (and Jetty configs).

You can also create nested group relationships in your config file using the `member of` key. A Jetty group can be a member of connector specific groups (like `snowflake::ANALYTICS`), but a connector-specific group cannot be a member of a Jetty group.

You can optionally add a group description as well, using the `description` key.

A fully-configured group might look like this:

```yaml title="groups/groups.yaml"
- ...
- name: My Special Group
  description: 'A special group for a special occasion'
  identifiers:
      snowflake: MY_SPECIAL_GROUP
  member of:
      - Party Planning Committee
```

:::info ACTION
Go ahead and create a new group, configuring it however you'd like
:::

## Users

User configurations are saved in the `<project dir>/users/` directory. Jetty generates file names for each user, but you are welcome to change those names however you'd like. After bootstrap, a user configuration file will look something like this:

```yaml title="users/product@get-jetty.com.yaml"
name: product@get-jetty.com
identifiers:
    snowflake: PRODUCT_GUY
    tableau: 4147d13e-5979-49a3-a7d6-e3552f16ef9c
member of:
    - snowflake::ANALYTICS
    - tableau::All Users
    - tableau::Analysts
```

The _name_ property is the name used to refer to this user in other config files. The _identifiers_ property specifies the connector-specific names for the user. Jetty uses email addresses to merge users whenever possible, but users can also be manually merged directly in the configuration files.

The _member of_ property specifies the groups that the user is a member of.

:::info ACTION
Go ahead and try adding a group to one of your user configuration files!
:::

## Policies

Policy configurations configured in asset configuration files in `<project dir>/assets/` and its subdirectories. The directory structure makes it easy to find specific asset configurations by mirroring your infrastructure's hierarchy. Each asset is represented by a directory and contains an `index.yaml` file. You are welcome to rename files and directories to suit your tastes.

Asset configuration files have three top-level properties: _identifier_ (required), _policies_ (optional), and _default policies_ (optional). The _identifier_ field identifies the asset for Jetty. _default policies_ define the default policies for the asset. Here we'll focus on the policies.

After bootstrapping, the _policies_ property of an asset configuration could look something like this:

```yaml
policies:
    - users:
          - elliot@allsafe.com
      groups:
          - tableau::test1
      privileges:
          - AllowRead
    - groups:
          - tableau::All Users
      privileges:
          - AllowRead
          - AllowWrite
```

_policies_ is a list of policies, with each policy specifying the users and/or groups that they will be applied to, as well as the specific privileges that are being applied. Policies can optionally have a description field as well. The privileges that can be specified in a policy depend on the type of asset the policy is being applied to.

:::note Policy grantees
Whether policies can be applied to groups, users, or both, is based on the characteristics of the connected platform. For example, in Snowflake, policies can only be applied to roles (groups), while in Tableau, they can be applied to users and/or roles.
:::

:::info ACTION
Add or modify a policy on one of your assets
:::

## Default Policies

Default policies are also configured as part of the asset configuration files in `<project dir>/assets/` and its subdirectories. After bootstrapping, the _default policies_ property of an asset configuration could look something like this:

```yaml
default policies:
    - path: /**
      target type: datasource
      connector-managed: true
      groups:
          - tableau::All Users
      privileges:
          - AllowConnect
          - AllowRead
          - AllowWrite
    - path: /**
      target type: flow
      connector-managed: true
      groups:
          - tableau::All Users
      privileges:
          - AllowRead
          - AllowWrite
```

A default policy is similar to a regular policy, but it sets the default permissions that should be applied to downstream assets. To define which assets the policies should be applied to, default policies have a _path_ and a _target type_. The _path_ is a path of wildcards (e.g. /\*/\*/\*\*, /\*\* or /\*) that specifies at which level of the hierarchy the policy should be applied. The policy will only be applied to assets whose type matches _target type_. Default policies can also have an optional _description_ property.

By default, Jetty will transform default policies into regular policies, but in some cases, the connected platforms can implement default policies directly (as future grants in Snowflake, or default permissions in Tableau for example). When this is the goal, the optional _connector-managed_ property can be set to true. Only connector-managed default policies are fetched by `jetty bootstrap`.

:::note Valid connector-managed default policies
Not all default polices can be connector-managed (for example, a future grant on a specific table isn't possible Snowflake). In the case that you set _connector-managed_ to true in a context that won't work on the specific connector, you will likely get an error.
:::

:::info ACTION
Add or modify a default policy on one of your assets
:::
